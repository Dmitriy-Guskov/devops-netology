# Домашнее задание к занятию "10.01. Зачем и что нужно мониторить"

## Обязательные задания

1. Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект представляет из себя 
платформу для вычислений с выдачей текстовых отчетов, которые сохраняются на диск. Взаимодействие с платформой 
осуществляется по протоколу http. Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы
выведите в мониторинг и почему?

Минимальная метрика - по http проверяем доступность сервиса и загрузку ЦПУ

В базовом варианте я бы предложил следующее:
- проверка доступности хостов (по icmp, например), сетеобразующего оборудования
- мониторинг загруженности канала
- загрузка процессора
- использование оперативной памяти
- мониторинг файловой системы, inodes, свободное мето на диске
- проверка доступности сервиса по http
- дисковые очереди
- количество открытых tcp-соединений
- мониторинг статуса БД (если есть)
- анализ логов на предмет ошибок

---

2. Менеджер продукта посмотрев на ваши метрики сказал, что ему непонятно что такое RAM/inodes/CPUla. Также он сказал, 
что хочет понимать, насколько мы выполняем свои обязанности перед клиентами и какое качество обслуживания. Что вы 
можете ему предложить?


Можно считать в реальном времени SLO/SLA/SLI и по результатам зажигать красный фонарь, или зеленый, или желтый
Если мы развиваем идею из п.1, то, думаю, можно попробовать предложить следующее:
- мониторинг времени формирования отчета (минимальное, максимальное, среднее)
- Количество несформированных отчетов (создание прошло неудачно)
- статистика доступности сервиса
- статистика web-сервера на предмет 1хх/2хх/3хх/4хх/5хх событий 

---

3. Вашей DevOps команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики в свою 
очередь хотят видеть все ошибки, которые выдают их приложения. Какое решение вы можете предпринять в этой ситуации, 
чтобы разработчики получали ошибки приложения?

Вариант 1 (дичь): собираем список заинтересованных и все ошибки напрямую отправляем на электронную почту/sms/telegram
Вариант 2: логи склабываем на сетевом ресурсе, куда даем доступ разработчикам
Вариант 3: если есть возможность, используем что-то бесплатное типа ELK
Вариант 4: исходя из условия (разработчики, ошибки работы ПО) можно предположить, что не требуется хранить большую историю ошибок, нужны только оперативные логи. Запилить ресурс (веб-сервер или что-то в этом роде) с оперативными логами без хранения истории.

---

4. Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA=99% по http кодам ответов. 
Вычисляете этот параметр по следующей формуле: summ_2xx_requests/summ_all_requests. Данный параметр не поднимается выше 
70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?

Можно предположить, что ошибка в том, что учитываем только 2хх коды, в то время как редректы (3хх) и информационные (1хх), так же нужно учитывать как успешные, т.к. они не являются по своей сути ошибками.
Код 2** - логичнее использовать как мониторинг доступности сервиса.
